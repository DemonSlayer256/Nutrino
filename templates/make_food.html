{% extends "index.html" %}

{% block title %}
Get Recipe Suggestion
{% endblock %}

{% block styles %}
<style>
  .recipe-form-container {
    max-width: 600px;
    margin: 0 auto;
  }
  .form-card {
    background: white;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    padding: 2.5rem;
  }
  .form-header {
    text-align: center;
    margin-bottom: 2rem;
  }
  .form-header h1 {
    font-size: 1.8rem;
    color: #2c3e50;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }
  .form-header p {
    color: #7f8c8d;
    font-size: 1rem;
  }
  .calorie-info-box {
    background: linear-gradient(135deg, #4CAF50, #45a049);
    color: white;
    padding: 1.5rem;
    border-radius: 10px;
    margin-bottom: 2rem;
    text-align: center;
  }
  .calorie-info-box h3 {
    margin: 0 0 0.5rem 0;
    font-size: 0.9rem;
    opacity: 0.9;
  }
  .calorie-info-box .calorie-value {
    font-size: 2rem;
    font-weight: 700;
    margin: 0;
  }
  .form-group {
    margin-bottom: 1.5rem;
  }
  .btn-submit {
    width: 100%;
    padding: 0.75rem;
    font-size: 1rem;
    font-weight: 600;
    border-radius: 8px;
    background: linear-gradient(135deg, #4CAF50, #45a049);
    border: none;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  .btn-submit:hover {
    background: linear-gradient(135deg, #45a049, #3d8b40);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
  }
</style>
{% endblock %}

{% block main %}
<div class="recipe-form-container">
  <!-- Back Link -->
  <a href="/" class="back-link">
    <i class="bi bi-arrow-left"></i> Back to Dashboard
  </a>

  <!-- Form Card -->
  <div class="form-card">
    <!-- Header -->
    <div class="form-header">
      <h1>üç≤ Get Recipe Suggestion</h1>
      <p>Let's find the perfect recipe for your meal</p>
    </div>

    <!-- Calorie Info Box -->
    <div class="calorie-info-box">
      <h3>Remaining Calories</h3>
      <p class="calorie-value">{{ remaining_calories | round(0) | int }}</p>
      <small>Goal: {{ recommended_calories | round(0) | int }} | Consumed: {{ calories_consumed | round(0) | int }}</small>
    </div>

    <!-- Info Text -->
    <div class="info-text">
      <i class="bi bi-info-circle"></i>
      Fill in the details below to get a personalized recipe suggestion that fits your remaining calorie target.
    </div>

    <!-- Form -->
    <form action="/make_food" method="POST">
      <!-- Remaining Calories -->
      <div class="form-group">
        <label for="remaining_calories" class="form-label">Remaining Calories</label>
        <input type="number" class="form-control" id="remaining_calories" name="remaining_calories" 
               value="{{ remaining_calories | round(0) | int }}" required>
        <small class="form-text text-muted">Automatically calculated from your daily goal</small>
      </div>

      <!-- Time of Day -->
      <div class="form-group">
        <label for="time_of_day" class="form-label">Meal Time</label>
        <select class="form-control" id="time_of_day" name="time_of_day" required>
          <option value="breakfast" {% if time_of_day == 'breakfast' %}selected{% endif %}>üåÖ Breakfast</option>
          <option value="lunch" {% if time_of_day == 'lunch' %}selected{% endif %}>‚òÄÔ∏è Lunch</option>
          <option value="dinner" {% if time_of_day == 'dinner' %}selected{% endif %}>üåô Dinner</option>
          <option value="snack">üçé Snack</option>
        </select>
      </div>

      <!-- Ingredients -->
      <div class="form-group">
        <label for="ingredients" class="form-label">Available Ingredients (Optional)</label>
        <textarea class="form-control" id="ingredients" name="ingredients" rows="3" 
                  placeholder="e.g., chicken, rice, tomatoes, garlic (one per line or comma separated)"></textarea>
        <small class="form-text text-muted">Leave blank for any suggestion, or list ingredients you have available</small>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="btn btn-submit">
        <i class="bi bi-search"></i> Get Recipe Suggestion
      </button>
    </form>
  </div>
</div>
{% endblock %}
